import{_ as J}from"./@babel-D0iV5qdj.js";import{r as dn}from"./resolve-pathname-D6XOvX2q.js";import{v as ln}from"./value-equal-epUc6GCk.js";import{i as on}from"./tiny-invariant-BaFNuDhB.js";function z(n){return n.charAt(0)==="/"?n:"/"+n}function Z(n){return n.charAt(0)==="/"?n.substr(1):n}function vn(n,e){return n.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(n.charAt(e.length))!==-1}function sn(n,e){return vn(n,e)?n.substr(e.length):n}function fn(n){return n.charAt(n.length-1)==="/"?n.slice(0,-1):n}function gn(n){var e=n||"/",c="",f="",a=e.indexOf("#");a!==-1&&(f=e.substr(a),e=e.substr(0,a));var p=e.indexOf("?");return p!==-1&&(c=e.substr(p),e=e.substr(0,p)),{pathname:e,search:c==="?"?"":c,hash:f==="#"?"":f}}function M(n){var e=n.pathname,c=n.search,f=n.hash,a=e||"/";return c&&c!=="?"&&(a+=c.charAt(0)==="?"?c:"?"+c),f&&f!=="#"&&(a+=f.charAt(0)==="#"?f:"#"+f),a}function $(n,e,c,f){var a;typeof n=="string"?(a=gn(n),a.state=e):(a=J({},n),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",e!==void 0&&a.state===void 0&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(p){throw p instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):p}return c&&(a.key=c),f?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=dn(a.pathname,f.pathname)):a.pathname=f.pathname:a.pathname||(a.pathname="/"),a}function En(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash===e.hash&&n.key===e.key&&ln(n.state,e.state)}function X(){var n=null;function e(m){return n=m,function(){n===m&&(n=null)}}function c(m,l,v,u){if(n!=null){var E=typeof n=="function"?n(m,l):n;typeof E=="string"?typeof v=="function"?v(E,u):u(!0):u(E!==!1)}else u(!0)}var f=[];function a(m){var l=!0;function v(){l&&m.apply(void 0,arguments)}return f.push(v),function(){l=!1,f=f.filter(function(u){return u!==v})}}function p(){for(var m=arguments.length,l=new Array(m),v=0;v<m;v++)l[v]=arguments[v];f.forEach(function(u){return u.apply(void 0,l)})}return{setPrompt:e,confirmTransitionTo:c,appendListener:a,notifyListeners:p}}var cn=!!(typeof window<"u"&&window.document&&window.document.createElement);function un(n,e){e(window.confirm(n))}function pn(){var n=window.navigator.userAgent;return(n.indexOf("Android 2.")!==-1||n.indexOf("Android 4.0")!==-1)&&n.indexOf("Mobile Safari")!==-1&&n.indexOf("Chrome")===-1&&n.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function mn(){return window.navigator.userAgent.indexOf("Trident")===-1}function wn(){return window.navigator.userAgent.indexOf("Firefox")===-1}function Pn(n){return n.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var nn="popstate",en="hashchange";function tn(){try{return window.history.state||{}}catch(n){return{}}}function Hn(n){n===void 0&&(n={}),cn||on();var e=window.history,c=pn(),f=!mn(),a=n,p=a.forceRefresh,m=p===void 0?!1:p,l=a.getUserConfirmation,v=l===void 0?un:l,u=a.keyLength,E=u===void 0?6:u,I=n.basename?fn(z(n.basename)):"";function x(i){var t=i||{},o=t.key,r=t.state,d=window.location,w=d.pathname,T=d.search,U=d.hash,b=w+T+U;return I&&(b=sn(b,I)),$(b,r,o)}function H(){return Math.random().toString(36).substr(2,E)}var L=X();function S(i){J(A,i),A.length=e.length,L.notifyListeners(A.location,A.action)}function G(i){Pn(i)||K(x(i.state))}function _(){K(x(tn()))}var B=!1;function K(i){if(B)B=!1,S();else{var t="POP";L.confirmTransitionTo(i,t,v,function(o){o?S({action:t,location:i}):N(i)})}}function N(i){var t=A.location,o=C.indexOf(t.key);o===-1&&(o=0);var r=C.indexOf(i.key);r===-1&&(r=0);var d=o-r;d&&(B=!0,P(d))}var D=x(tn()),C=[D.key];function s(i){return I+M(i)}function h(i,t){var o="PUSH",r=$(i,t,H(),A.location);L.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),T=r.key,U=r.state;if(c)if(e.pushState({key:T,state:U},null,w),m)window.location.href=w;else{var b=C.indexOf(A.location.key),F=C.slice(0,b+1);F.push(r.key),C=F,S({action:o,location:r})}else window.location.href=w}})}function O(i,t){var o="REPLACE",r=$(i,t,H(),A.location);L.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),T=r.key,U=r.state;if(c)if(e.replaceState({key:T,state:U},null,w),m)window.location.replace(w);else{var b=C.indexOf(A.location.key);b!==-1&&(C[b]=r.key),S({action:o,location:r})}else window.location.replace(w)}})}function P(i){e.go(i)}function g(){P(-1)}function R(){P(1)}var q=0;function k(i){q+=i,q===1&&i===1?(window.addEventListener(nn,G),f&&window.addEventListener(en,_)):q===0&&(window.removeEventListener(nn,G),f&&window.removeEventListener(en,_))}var y=!1;function W(i){i===void 0&&(i=!1);var t=L.setPrompt(i);return y||(k(1),y=!0),function(){return y&&(y=!1,k(-1)),t()}}function Q(i){var t=L.appendListener(i);return k(1),function(){k(-1),t()}}var A={length:e.length,action:"POP",location:D,createHref:s,push:h,replace:O,go:P,goBack:g,goForward:R,block:W,listen:Q};return A}var an="hashchange",yn={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+Z(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:Z,decodePath:z},slash:{encodePath:z,decodePath:z}};function hn(n){var e=n.indexOf("#");return e===-1?n:n.slice(0,e)}function j(){var n=window.location.href,e=n.indexOf("#");return e===-1?"":n.substring(e+1)}function xn(n){window.location.hash=n}function V(n){window.location.replace(hn(window.location.href)+"#"+n)}function Cn(n){n===void 0&&(n={}),cn||on();var e=window.history;wn();var c=n,f=c.getUserConfirmation,a=f===void 0?un:f,p=c.hashType,m=p===void 0?"slash":p,l=n.basename?fn(z(n.basename)):"",v=yn[m],u=v.encodePath,E=v.decodePath;function I(){var t=E(j());return l&&(t=sn(t,l)),$(t)}var x=X();function H(t){J(i,t),i.length=e.length,x.notifyListeners(i.location,i.action)}var L=!1,S=null;function G(t,o){return t.pathname===o.pathname&&t.search===o.search&&t.hash===o.hash}function _(){var t=j(),o=u(t);if(t!==o)V(o);else{var r=I(),d=i.location;if(!L&&G(d,r)||S===M(r))return;S=null,B(r)}}function B(t){if(L)L=!1,H();else{var o="POP";x.confirmTransitionTo(t,o,a,function(r){r?H({action:o,location:t}):K(t)})}}function K(t){var o=i.location,r=s.lastIndexOf(M(o));r===-1&&(r=0);var d=s.lastIndexOf(M(t));d===-1&&(d=0);var w=r-d;w&&(L=!0,g(w))}var N=j(),D=u(N);N!==D&&V(D);var C=I(),s=[M(C)];function h(t){var o=document.querySelector("base"),r="";return o&&o.getAttribute("href")&&(r=hn(window.location.href)),r+"#"+u(l+M(t))}function O(t,o){var r="PUSH",d=$(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var T=M(d),U=u(l+T),b=j()!==U;if(b){S=T,xn(U);var F=s.lastIndexOf(M(i.location)),Y=s.slice(0,F+1);Y.push(T),s=Y,H({action:r,location:d})}else H()}})}function P(t,o){var r="REPLACE",d=$(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var T=M(d),U=u(l+T),b=j()!==U;b&&(S=T,V(U));var F=s.indexOf(M(i.location));F!==-1&&(s[F]=T),H({action:r,location:d})}})}function g(t){e.go(t)}function R(){g(-1)}function q(){g(1)}var k=0;function y(t){k+=t,k===1&&t===1?window.addEventListener(an,_):k===0&&window.removeEventListener(an,_)}var W=!1;function Q(t){t===void 0&&(t=!1);var o=x.setPrompt(t);return W||(y(1),W=!0),function(){return W&&(W=!1,y(-1)),o()}}function A(t){var o=x.appendListener(t);return y(1),function(){y(-1),o()}}var i={length:e.length,action:"POP",location:C,createHref:h,push:O,replace:P,go:g,goBack:R,goForward:q,block:Q,listen:A};return i}function rn(n,e,c){return Math.min(Math.max(n,e),c)}function An(n){n===void 0&&(n={});var e=n,c=e.getUserConfirmation,f=e.initialEntries,a=f===void 0?["/"]:f,p=e.initialIndex,m=p===void 0?0:p,l=e.keyLength,v=l===void 0?6:l,u=X();function E(h){J(s,h),s.length=s.entries.length,u.notifyListeners(s.location,s.action)}function I(){return Math.random().toString(36).substr(2,v)}var x=rn(m,0,a.length-1),H=a.map(function(h){return typeof h=="string"?$(h,void 0,I()):$(h,void 0,h.key||I())}),L=M;function S(h,O){var P="PUSH",g=$(h,O,I(),s.location);u.confirmTransitionTo(g,P,c,function(R){if(R){var q=s.index,k=q+1,y=s.entries.slice(0);y.length>k?y.splice(k,y.length-k,g):y.push(g),E({action:P,location:g,index:k,entries:y})}})}function G(h,O){var P="REPLACE",g=$(h,O,I(),s.location);u.confirmTransitionTo(g,P,c,function(R){R&&(s.entries[s.index]=g,E({action:P,location:g}))})}function _(h){var O=rn(s.index+h,0,s.entries.length-1),P="POP",g=s.entries[O];u.confirmTransitionTo(g,P,c,function(R){R?E({action:P,location:g,index:O}):E()})}function B(){_(-1)}function K(){_(1)}function N(h){var O=s.index+h;return O>=0&&O<s.entries.length}function D(h){return h===void 0&&(h=!1),u.setPrompt(h)}function C(h){return u.appendListener(h)}var s={length:H.length,action:"POP",location:H[x],index:x,entries:H,createHref:L,push:S,replace:G,go:_,goBack:B,goForward:K,canGo:N,block:D,listen:C};return s}export{Cn as a,$ as b,Hn as c,An as d,M as e,En as l};
